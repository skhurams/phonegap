<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta name="format-detection" content="telephone=no" />
    <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1,   width=device-width, height=device-height" />
    <link rel="icon" href="favicon.ico" type="image/x-icon" />
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
    <link rel="stylesheet" type="text/css" href="css/jalf_theme.css" />
    <link rel="stylesheet" type="text/css" href="css/jquery.mobile.structure.css" />

    <link rel="stylesheet" type="text/css" href="css/index.css" />
    <script type="text/javascript" src="js/jquery.min.js"></script>
    <script type="text/javascript" src="js/i18next.js"></script>
    <script type="text/javascript" src="js/jquery.mobile.js"></script>
    <script type="text/javascript">
        if (navigator.userAgent.toLowerCase().match(/android/))
        document.write('<script charset="utf-8" src="cordova.android.js"><\/script>');
        else //if (navigator.userAgent.toLowerCase().match(/iphone/) || navigator.userAgent.toLowerCase().match(/ipad/))
        document.write('<script charset="utf-8" src="cordova.js"><\/script>');
        </script>
</head>

<body>
    <div id="MailboxListPage" data-role="page" data-theme="a">
        <div data-role="header" data-theme="a">
            <div class="center-wrapper">
                <img src="img/ban_messagerie.png" class="headerimg" />
            </div>
        </div>
        <style>
        .ui-disabled {
            opacity: 1;
        }
        .ui-checkbox .ui-btn-icon-left .ui-btn-inner, .ui-radio .ui-btn-icon-left .ui-btn-inner {
            padding-left: 0px;
        }
        .ui-checkbox .ui-btn-inner, .ui-radio .ui-btn-inner {
            white-space: normal;
        }
        .ui-btn-icon-right .ui-btn-inner {
            padding-right: 0px;
        }
        .ui-btn-icon-left .ui-btn-inner {
            padding-left: 0px;
        }
        .ui-fullsize .ui-btn-inner, .ui-fullsize .ui-btn-inner {
            font-size: 16px;
            padding: 0px;
        }
        .table {
            border:none;
            /*   border-spacing: 4px 2px;*/
            width:100%;
        }
        .ui-table {
            border-collapse: separate !important;
        }
        #tblMail > tbody > tr > td:nth-child(1) {
            border-radius: 4px 0px 0px 4px;
            width:10%;
            text-align: center;
            padding-top: 25px;
        }
        #tblMail > tbody > tr > td:nth-child(2) {
            width:24%;
        }
        #tblMail > tbody > tr > td:nth-child(3) {
            border-radius: 0px 4px 4px 0px;
            width:60%;
        }
        #tblMail > tbody > tr {
            background-color:#f1f3f3;
            cursor: pointer;
        }
        #tblMail > tbody > tr:nth-child(odd) td {
            background-color:#4a0404;
        }
        #tblMail > tbody > tr:nth-child(even) td {
            font-style:italic;
            background-color:#320505;
        }
        #tblMail > tbody > tr:nth-child(odd) {
            background-color:#f1f3f3;
        }
        #tblMail > tbody > tr:nth-child(even) {
            font-style:italic;
            background-color:#f1f3f3;
        }
        #tblMail > tbody > tr > td:nth-child(2) {
            background-color:#000;
        }
        #tblMail {
            border-radius: 0px 0px 4px 4px;
        }
        #tblHeading > thead > tr > th {
            cursor: pointer;
        }
        .tblHeading {
            padding:4%;
            width:33%;
        }
        #tblHeading > thead > tr > th:last-child {
            border-radius: 0px 4px 4px 0px;
        }
        #tblHeading > thead > tr> th:first-child {
            border-radius: 4px 0px 0px 4px;
        }
        #tblHeading > tbody {
            background-color:#f1f3f3;
        }
        #tblHeading > thead > tr > th > span > img {
            float:right;
            float: right;
            height: 8px;
            width: 10px;
            padding-right: 9px;
        }
        th.tblHeading > a {
            text-decoration:none;
            color:#f1f3f3 !important;
        }
        th.tblHeading > a:visited {
        }
        .on {
            display:block
        }
        .off {
            display:none;
        }
        .coldate {
            color:#d9a025;
        }
        .headerimg {
            width: 100%;
            max-height: 100px;
        }
        #filterdate {
            color:#f1f3f3;
            text-decoration: none;
        }
        #filtersubject {
            color:#f1f3f3;
            text-decoration: none;
        }
        #filtermember {
            color:#f1f3f3;
            text-decoration: none;
        }
        #tblHeading > thead > tr > th {
            cursor: pointer;
        }
        #aNextPage > span:nth-child(1) {
            padding-right: 0px;
            float: right;
        }
        div.ui-block-a {
            width: 40%!important;
        }
        div.ui-block-b {
            width: 55%!important;
        }
        .barContainer {
            width: 65%;
            margin: 0px auto;
            position: fixed;
            bottom: 52px;
            padding-bottom: 0px;
        }
        .ui-bar {
            padding: 5px 0px;
            font-size: 10px;
            border-radius: 4px;
        }
        .ui-controlgroup a {
            height: 40px !important;
        }
        .ui-bar .ui-controlgroup {
            margin: 0px;
        }
        .ui-controlgroup .ui-btn-icon-notext .ui-btn-inner {
            height: 40px;
            line-height: 40px;
            padding: 0;
            width: 25px;
        }
        #aPager {
            opacity: 1 !important;
            width: 20px;
        }
        #aPager .ui-btn-inner {
            width: 20px !important;
            padding-left: 1px;
            padding-right: 8px;
            padding-top: 12px;
        }
        #aPager > span:nth-child(1) > span:nth-child(1) {
            font-size: 18px;
        }
        .ui-btn-left, .ui-btn-right, .ui-input-clear, .ui-btn-inline, .ui-grid-a .ui-btn, .ui-grid-b .ui-btn, .ui-grid-c .ui-btn, .ui-grid-d .ui-btn, .ui-grid-e .ui-btn, .ui-grid-solo .ui-btn {
            margin: 0;
        }
        .ui-controlgroup.ui-mini .ui-btn-icon-notext .ui-btn-inner, .ui-header .ui-controlgroup .ui-btn-icon-notext .ui-btn-inner, .ui-footer .ui-controlgroup .ui-btn-icon-notext .ui-btn-inner {
            height: 18px;
            padding: 0 0 2.5em;
        }
        .hideme {
            display:none;
        }
        .ui-content {
            padding: 0px 15px;
        }
        </style>
        <script type="text/javascript" src="js/index.js"></script>
        <script type="text/javascript" src="js/main.js"></script>
        <script type="text/javascript" src="js/mailboxList.js"></script>
        <script>
        $(document).bind("pagebeforecreate", function() {
            $.i18n.init(opts).done(function() {
                $('#btnBackMailboxList  .ui-btn-text').text($.t('Common.btnBack'));
                $("#aModify > span > span").text($.t('mailboxList.aModify'));
                $("#lblDate").text($.t('Common.Date'));
                $("#lblSubject").text($.t('Common.Subject'));
                $("#lblMember").text($.t('Common.Member'));
                $("#amailbox span.ui-btn-text").text($.t('BottomToolbar.amailbox'));
                $("#afavorites span.ui-btn-text").text($.t('BottomToolbar.afavorites'));
                $("#asearch span.ui-btn-text").text($.t('BottomToolbar.asearch'));
                $("#aphotos span.ui-btn-text").text($.t('BottomToolbar.aphotos'));
                $("#alocalization span.ui-btn-text").text($.t('BottomToolbar.alocalization'));
            });
        });
        $('[data-role=page]').on('pagebeforeshow', function(event, ui) {
            console.log('on viewMailboxListMod pagebeforeshow create page');
            $('#MailboxListPage').trigger('create');
        });

        function MailboxRefresh() {
            message_type = sessionStorage.getItem('message_type');
            $('#aPager .ui-btn-text').html('0');
            $('#tblMail tr').remove();
            loadMailbox(message_type, 'date', 'desc');
            $('#MailboxListPage').trigger('create');
        }
        $(document).ready(function() {
            //////////////////////////////////////////////////////////////////////////////////////
            $('.btnBackMailboxList').click(function() {
                GotoLink("mailbox.html", true);
            });
            message_type = sessionStorage.getItem('message_type');
            console.log('email list deocument ready function');
            console.log('message_type=  ' + message_type);
            loadMailbox(message_type, 'date', 'desc');
            //////////////////////////////////////////////////////////////////////////////////////   

            $("#filterdate").click(function() {
                message_type = sessionStorage.getItem('message_type');
                if ($("#filterdate").data('icon') == 'arrow-d') {
                    $("#filterdate").data('icon', 'arrow-u');
                    $("#filterdate .ui-icon").addClass("ui-icon-arrow-u").removeClass("ui-icon-arrow-d");
                    $("#filtersubject").data('icon', 'arrow-d');
                    $("#filtersubject .ui-icon").addClass("ui-icon-arrow-d").removeClass("ui-icon-arrow-u");
                    $("#filtermember").data('icon', 'arrow-d');
                    $("#filtermember .ui-icon").addClass("ui-icon-arrow-d").removeClass("ui-icon-arrow-u");

                    loadMailbox(message_type, "date", 'desc');
                } else {
                    $("#filterdate").data('icon', 'arrow-d');
                    $("#filterdate .ui-icon").addClass("ui-icon-arrow-d").removeClass("ui-icon-arrow-u");
                    loadMailbox(message_type, "date", 'asc');
                }
            });

            $("#filtermember").click(function() {
                message_type = sessionStorage.getItem('message_type');
                if ($("#filtermember").data('icon') == 'arrow-d') {
                    $("#filtermember").data('icon', 'arrow-u');
                    $("#filtermember .ui-icon").addClass("ui-icon-arrow-u").removeClass("ui-icon-arrow-d");
                    $("#filterdate").data('icon', 'arrow-d');
                    $("#filterdate .ui-icon").addClass("ui-icon-arrow-d").removeClass("ui-icon-arrow-u");
                    $("#filtersubject").data('icon', 'arrow-d');
                    $("#filtersubject .ui-icon").addClass("ui-icon-arrow-d").removeClass("ui-icon-arrow-u");

                    loadMailbox(message_type, "sender", 'desc');
                } else {
                    $("#filtermember").data('icon', 'arrow-d');
                    $("#filtermember .ui-icon").addClass("ui-icon-arrow-d").removeClass("ui-icon-arrow-u");
                    loadMailbox(message_type, "sender", 'asc');
                }
            });
            $("#filtersubject").click(function() {
                message_type = sessionStorage.getItem('message_type');
                if ($("#filtersubject").data('icon') == 'arrow-d') {
                    $("#filtersubject").data('icon', 'arrow-u');
                    $("#filtersubject .ui-icon").addClass("ui-icon-arrow-u").removeClass("ui-icon-arrow-d");
                    $("#filterdate").data('icon', 'arrow-d');
                    $("#filterdate .ui-icon").addClass("ui-icon-arrow-d").removeClass("ui-icon-arrow-u");
                    $("#filtermember").data('icon', 'arrow-d');
                    $("#filtermember .ui-icon").addClass("ui-icon-arrow-d").removeClass("ui-icon-arrow-u");
                    loadMailbox(message_type, "subject", 'desc');
                } else {
                    $("#filtersubject").data('icon', 'arrow-d');
                    $("#filtersubject .ui-icon").addClass("ui-icon-arrow-d").removeClass("ui-icon-arrow-u");
                    loadMailbox(message_type, "subject", 'asc');
                }
            });
        });

        function SortDate() {
            message_type = sessionStorage.getItem('message_type');
            console.log('SortDate clicked');
            $('#tblMail tr').remove();
            loadMailbox(message_type, "date", 'desc');
        }

        function SortSubject() {
            message_type = sessionStorage.getItem('message_type');
            console.log('SortSubject clicked');
            $('#tblMail tr').remove();
            loadMailbox(message_type, "subject", 'desc');
        }

        function SortMember() {
            message_type = sessionStorage.getItem('message_type');
            console.log('SortMember clicked');
            $('#tblMail tr').remove();
            loadMailbox(message_type, "sender", 'desc');
        }

        function GotoModifier() {

            if ($('#tblMail tbody tr').length > 0) {
                GotoLink('mailboxListMod.html');
            } else {
                msgAlert("Cannot continue no rows found.");
            }
        }
        </script>
        <div data-role="content" data-theme="a">
            <div class="ui-bar ui-bar-b ui-corner-all  bar" data-theme="a">
                <div class="ui-btn-left">
                    <a id="btnBackMailboxList" rel="external" href="javascript:void(0);" data-role="button" class="btn-bar  btnBackMailboxList" data-inline="true" data-theme="a">Back</a> 
                </div>
                <div class="ui-btn-right">
                    <a data-role="button" rel="external" href="javascript:void(0);" class="imgRefresh" data-mini="true" data-icon-pos="none" data-inline="true" onclick="MailboxRefresh();" style="width:37px;height:37px;" data-theme="a"></a>
                </div>
            </div>
            <div id="dvMainTable" style="min-height: 695px;margin:20px auto 45px auto;">
                <div style="background-color: #F1F3F3; padding: 1px;border-radius: 4px 4px 0px 0px;">
                    <table id="tblHeading" class="table ui-responsive" style="background-color: #f1f3f3; padding: 1px; text-align: center;border-radius: 4px 4px 0px 0px;">
                        <thead>
                            <tr>
                                <th onclick="SortDate();" style="padding:2%;width:33%;background-color:#000;">
                                    <span id="lblDate">
                                        Date
                                    </span>
                                    <span>
                                        <img id="img1" class="on" src="img/arrow_list_menu.png" />
                                    </span>
                                </th>
                                <th onclick="SortSubject();" style="padding:2%;width:33%;background-color:#000;">
                                    <span id="lblSubject">
                                        Subject
                                    </span>
                                    <span>
                                        <img id="img1" class="on" src="img/arrow_list_menu.png" />
                                    </span>
                                </th>
                                <th onclick="SortMember();" style="padding:2%;width:33%;background-color:#000;">
                                    <span id="lblMember">
                                        Member
                                    </span>
                                    <span>
                                        <img id="img1" class="on" src="img/arrow_list_menu.png" />
                                    </span>
                                </th>
                            </tr>
                        </thead>
                    </table>

                </div>
                <div style="background-color: #F1F3F3;  margin: 0px auto;border-radius: 0px 0px 4px 4px;">
                    <table id="tblMail" class="table ui-responsive ui-table" cellpadding="2px">
                        <tbody></tbody>
                    </table>
                </div>
            </div>
            <div class="mtMessage" id="mtMessage"></div>
        </div>
        <div class="barContainer" id="barContainer2">
            <div class="ui-bar ui-bar-b">
                <table style="width: 100%">
                    <tbody>
                        <tr>
                            <td style="width: 1%">
                                <a href="#" id="aModify" onclick="GotoModifier();" class="LnkButton ui-icon-alt ui-btn ui-btn-up-a ui-shadow ui-btn-corner-all ui-btn-inline" data-theme="a" data-role="button" data-inline="true" data-corners="true" data-shadow="true" data-iconshadow="true" data-wrapperels="span">
                                    <span class="ui-btn-inner">
                                        <span class="ui-btn-text">Modify</span>
                                    </span>
                                </a>
                            </td>
                            <td style="text-align: right;">
                                <div data-role="controlgroup" id="dvPager" data-type="horizontal" style="" class="ui-corner-all ui-controlgroup ui-controlgroup-horizontal" aria-disabled="false" data-disabled="false" data-shadow="false" data-corners="true" data-exclude-invisible="true" data-mini="false" data-init-selector=":jqmData(role='controlgroup')">
                                    <div class="ui-controlgroup-controls">

                                        <a href="javascript:void(0);" data-role="button" id="aPreviousPage" class="Button ui-icon-alt ui-btn ui-btn-up-c ui-shadow ui-btn-corner-all ui-btn-icon-notext ui-first-child" onclick="PreviousPage()" data-theme="c" data-icon="arrow-l" data-iconpos="notext" data-corners="true" data-shadow="true" data-iconshadow="true" data-wrapperels="span" title="">
                                            <span class="ui-btn-inner">
                                                <span class="ui-btn-text"></span>
                                                <span class="ui-icon ui-icon-arrow-l ui-icon-shadow">&nbsp;</span>
                                            </span>
                                        </a>
                                        <a data-role="button" id="aPager" class="ui-disabled ui-btn ui-btn-up-c ui-shadow ui-btn-corner-all" data-theme="c" data-corners="true" data-shadow="true" data-iconshadow="true" data-wrapperels="span">
                                            <span class="ui-btn-inner">
                                                <span class="ui-btn-text">0</span>
                                            </span>
                                        </a>
                                        <a href="javascript:void(0);" data-role="button" id="aNextPage" class="Button ui-icon-alt ui-btn ui-btn-up-c ui-shadow ui-btn-corner-all ui-btn-inline ui-btn-icon-notext ui-last-child" onclick="NextPage()" data-icon="arrow-r" data-theme="c" data-iconpos="notext" data-inline="true" data-corners="true" data-shadow="true" data-iconshadow="true" data-wrapperels="span" title="">
                                            <span class="ui-btn-inner">
                                                <span class="ui-btn-text"></span>
                                                <span class="ui-icon ui-icon-arrow-r ui-icon-shadow">&nbsp;</span>
                                            </span>
                                        </a>
                                    </div>
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
        <div id="dvCount" class="hideme"></div>
        <div data-role="footer" data-id="mainFooter" data-position="fixed" class="ui-footer ui-bar-a ui-footer-fixed slideup" role="contentinfo">
            <div data-role="navbar" data-grid="d" class="ui-navbar ui-mini" role="navigation">
                <ul class="apple-navbar-ui comboSprite ui-grid-d">
                    <li class="ui-block-a">
                        <a href="mailbox.html" rel="external" id="amailbox" class="ui-btn-active ui-btn ui-btn-up-a ui-btn-inline ui-btn-icon-top" data-iconpos="top" data-icon="features" data-corners="false" data-shadow="false" data-iconshadow="true" data-wrapperels="span" data-theme="a" data-inline="true">
                            <span class="ui-btn-inner">
                                <span class="ui-btn-text">Message</span>
                                <span class="ui-icon ui-icon-features ui-icon-shadow">&nbsp;</span>
                            </span>
                        </a>
                    </li>
                    <li class="ui-block-b">
                        <a href="favorites.html" rel="external" id="afavorites" data-iconpos="top" data-icon="brands" data-corners="false" data-shadow="false" data-iconshadow="true" data-wrapperels="span" data-theme="a" data-inline="true" class="ui-btn ui-btn-up-a ui-btn-inline ui-btn-icon-top">
                            <span class="ui-btn-inner">
                                <span class="ui-btn-text">Favourite</span>
                                <span class="ui-icon ui-icon-brands ui-icon-shadow">&nbsp;</span>
                            </span>
                        </a>
                    </li>
                    <li class="ui-block-c">
                        <a href="search.html" rel="external" id="asearch" data-iconpos="top" data-icon="fees" data-corners="false" data-shadow="false" data-iconshadow="true" data-wrapperels="span" data-theme="a" data-inline="true" class="ui-btn ui-btn-up-a ui-btn-inline ui-btn-icon-top">
                            <span class="ui-btn-inner">
                                <span class="ui-btn-text">Search</span>
                                <span class="ui-icon ui-icon-fees ui-icon-shadow">&nbsp;</span>
                            </span>
                        </a>
                    </li>
                   <!--  <li class="ui-block-d">
                        <a href="AlbumCategory.html" rel="external" id="aphotos" data-iconpos="top" data-icon="contact" data-corners="false" data-shadow="false" data-iconshadow="true" data-wrapperels="span" data-theme="a" data-inline="true" class="ui-btn ui-btn-up-a ui-btn-inline ui-btn-icon-top">
                            <span class="ui-btn-inner">
                                <span class="ui-btn-text">Photos</span>
                                <span class="ui-icon ui-icon-contact ui-icon-shadow">&nbsp;</span>
                            </span>
                        </a>
                    </li>
                    <li class="ui-block-e">
                        <a href="#" data-iconpos="top" rel="external" id="alocalization" data-icon="about" data-corners="false" data-shadow="false" data-iconshadow="true" data-wrapperels="span" data-theme="a" data-inline="true" class="ui-btn ui-btn-up-a ui-btn-inline ui-btn-icon-top">
                            <span class="ui-btn-inner">
                                <span class="ui-btn-text">Localization</span>
                                <span class="ui-icon ui-icon-about ui-icon-shadow">&nbsp;</span>
                            </span>
                        </a>
                    </li> -->
                </ul>
            </div>
        </div>
        <!-- footer -->
        <link rel="stylesheet" type="text/css" href="css/bartender.css" />
    </div>
</body>

</html>
<!--         <div class="barContainer" id="barContainer2">
            <div class="ui-bar ui-bar-b">
                <table style="width: 100%">
                    <tr>
                        <td style="width: 1%">
                            <a href="#" id="aModify" onclick="GotoModifier();" class="LnkButton ui-icon-alt" data-theme="a" data-role="button" data-inline="true">Modifier</a> 
                        </td>
                        <td style="text-align: right;">
                            <div data-role="controlgroup" id="dvPager" data-type="horizontal" style="">

                                <a href="javascript:void(0);" data-role="button" id="aPreviousPage" class="Button ui-icon-alt" onclick="PreviousPage()" data-theme="c" data-icon="arrow-l" data-iconpos="notext"></a>
                                <a data-role="button" id="aPager" class="ui-disabled" data-theme="c">0</a>
                                <a href="javascript:void(0);" data-role="button" id="aNextPage" class="Button ui-icon-alt" onclick="NextPage()" data-icon="arrow-r" data-theme="c" data-iconpos="notext" data-inline="true"></a>
                            </div>
                        </td>
                    </tr>
                </table>
            </div>
        </div> -->
